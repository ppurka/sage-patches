# HG changeset patch
# User Punarbasu Purkayastha <ppurka@gmail.com>
# Date 1337239403 -28800
# Node ID 39d63912d0b6c177158934d4c49efcb35fe6a879
# Parent  a41459d5bc8a9b45b2c15c7906a2199cba63dcd0
set a basic set of legend options so that matplotlib() works

diff --git a/sage/plot/graphics.py b/sage/plot/graphics.py
--- a/sage/plot/graphics.py
+++ b/sage/plot/graphics.py
@@ -273,6 +273,16 @@
         else:
             self.__show_legend = bool(show)
 
+        # Add a basic set of legend options to self.__legend_opts so that
+        # self.matplotlib() does not fail.
+        if self.__show_legend:
+            d = dict(back_color=(0.9, 0.9, 0.9), font_family='sans-serif',
+                    font_size='medium', font_style='normal',
+                    font_weight='medium', font_variant='normal')
+            for key in d.iterkeys():
+                if key not in self.__legend_opts:
+                    self.__legend_opts[key] = d[key]
+
     def set_legend_options(self, **kwds):
         r"""
         Set various legend options.
