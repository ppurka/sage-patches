# HG changeset patch
# User Punarbasu Purkayastha <ppurka@gmail.com>
# Date 1337239403 -28800
# Node ID fc71d0fa6b2cd3599c03a8c8d582697a4b1904e2
# Parent  199c38b75b051010fb474d36e0e49541f069c0c1
set a basic set of legend options so that matplotlib() works

diff --git a/sage/plot/graphics.py b/sage/plot/graphics.py
--- a/sage/plot/graphics.py
+++ b/sage/plot/graphics.py
@@ -273,6 +273,16 @@
         else:
             self._show_legend = bool(show)
 
+        # Add a basic set of legend options to self._legend_opts so that
+        # self.matplotlib() does not fail.
+        if self._show_legend:
+            d = dict(back_color=(0.9, 0.9, 0.9), font_family='sans-serif',
+                    font_size='medium', font_style='normal',
+                    font_weight='medium', font_variant='normal')
+            for key in d.iterkeys():
+                if key not in self._legend_opts:
+                    self._legend_opts[key] = d[key]
+
     def set_legend_options(self, **kwds):
         r"""
         Set various legend options.
@@ -1600,17 +1610,15 @@
             ymax += 1
         return {'xmin':xmin, 'xmax':xmax, 'ymin':ymin, 'ymax':ymax}
         
+    # All the keywords except the first are alphabetically arranged.
     def matplotlib(self, filename=None,
+                   aspect_ratio=None, axes=None, axes_labels=None, axes_pad=0.02,
+                   figsize=None, figure=None, fontsize=None, frame=False,
+                   gridlines=None, gridlinesstyle=None, hgridlinesstyle=None,
+                   legend_options={}, show_legend=None, sub=None,
+                   ticks=None, ticks_integer=None, tick_formatter=None,
                    xmin=None, xmax=None, ymin=None, ymax=None,
-                   figsize=None, figure=None, sub=None,
-                   axes=None, axes_labels=None, fontsize=None,
-                   frame=False, verify=True,
-                   aspect_ratio = None,
-                   gridlines=None, gridlinesstyle=None,
-                   vgridlinesstyle=None, hgridlinesstyle=None,
-                   show_legend=None, legend_options={},
-                   axes_pad=0.02, ticks_integer=None,
-                   tick_formatter=None, ticks=None):
+                   vgridlinesstyle=None, verify=True):
         r"""
         Return a matplotlib figure object representing the graphic
 
